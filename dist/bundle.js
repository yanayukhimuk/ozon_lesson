/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function t(){var n,r,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(t,o,c,a){var i=o&&o.prototype instanceof l?o:l,s=Object.create(i.prototype);return e(s,"_invoke",function(t,e,o){var c,a,i,l=0,s=o||[],f=!1,d={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(t,e){return c=t,a=0,i=n,d.n=e,u}};function p(t,e){for(a=t,i=e,r=0;!f&&l&&!o&&r<s.length;r++){var o,c=s[r],p=d.p,v=c[2];t>3?(o=v===e)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=n):c[0]<=p&&((o=t<2&&p<c[1])?(a=0,d.v=e,d.n=c[1]):p<v&&(o=t<3||c[0]>e||e>v)&&(c[4]=t,c[5]=e,d.n=v,a=0))}if(o||t>1)return u;throw f=!0,e}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),a=s,i=v;(r=a<2?n:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(l=2,c){if(a||(o="next"),r=c[o]){if(!(r=r.call(c,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=c.return)&&r.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=n}else if((r=(f=d.n<0)?i:t.call(e,d))!==u)break}catch(t){c=n,a=1,i=t}finally{l=1}}return{value:r,done:f}}}(t,c,a),!0),s}var u={};function l(){}function s(){}function f(){}r=Object.getPrototypeOf;var d=[][c]?r(r([][c]())):(e(r={},c,function(){return this}),r),p=f.prototype=l.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return s.prototype=f,e(p,"constructor",f),e(f,"constructor",s),s.displayName="GeneratorFunction",e(f,a,"GeneratorFunction"),e(p),e(p,a,"Generator"),e(p,c,function(){return this}),e(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:v}})()}function e(t,n,r,o){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}e=function(t,n,r,o){function a(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?c?c(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r:(a("next",0),a("throw",1),a("return",2))},e(t,n,r,o)}function n(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}const r=function(){var e,r=(e=t().m(function e(){var n;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("https://test-e6b54-default-rtdb.firebaseio.com/goods.json");case 1:return n=t.v,t.n=2,n.json();case 2:return t.a(2,t.v)}},e)}),function(){var t=this,r=arguments;return new Promise(function(o,c){var a=e.apply(t,r);function i(t){n(a,o,c,i,u,"next",t)}function u(t){n(a,o,c,i,u,"throw",t)}i(void 0)})});return function(){return r.apply(this,arguments)}}(),o=function(t){var e=document.querySelector(".cart-wrapper");e.innerHTML="",0===t.length||t.forEach(function(t){e.insertAdjacentHTML("beforeend",'<div class="card" data-key="'.concat(t.id,'">\n                                ').concat(t.sale?'<div class="card-sale">ðŸ”¥Hot SaleðŸ”¥</div>':"",'\n\t\t\t\t\t\t\t\t\t<div class="card-img-wrapper">\n\t\t\t\t\t\t\t\t\t\t<span class="card-img-top" style="background-image: url(\'').concat(t.img,'\')"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="card-body justify-content-between">\n\t\t\t\t\t\t\t\t\t\t<div class="card-price">').concat(t.price,' â‚½</div>\n\t\t\t\t\t\t\t\t\t\t<h5 class="card-title">').concat(t.title,'</h5>\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-primary">Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n            '))})};function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,c){var i=r&&r.prototype instanceof l?r:l,s=Object.create(i.prototype);return a(s,"_invoke",function(n,r,o){var c,a,i,l=0,s=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return c=e,a=0,i=t,d.n=n,u}};function p(n,r){for(a=n,i=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,c=s[e],p=d.p,v=c[2];n>3?(o=v===r)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=t):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,d.v=r,d.n=c[1]):p<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),a=s,i=v;(e=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(l=2,c){if(a||(o="next"),e=c[o]){if(!(e=e.call(c,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=c.return)&&e.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==u)break}catch(e){c=t,a=1,i=e}finally{l=1}}return{value:e,done:f}}}(n,o,c),!0),s}var u={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var d=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),p=f.prototype=l.prototype=Object.create(d);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return s.prototype=f,a(p,"constructor",f),a(f,"constructor",s),s.displayName="GeneratorFunction",a(f,o,"GeneratorFunction"),a(p),a(p,o,"Generator"),a(p,r,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(c=function(){return{w:i,m:v}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){function c(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(c("next",0),c("throw",1),c("return",2))},a(t,e,n,r)}function i(t,e,n,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}var u=function(t,e,n){return t.filter(function(t){return""===e&&""===n?t:""!==e&&""!==n?t.price>+e&&t.price<+n:""!==e&&""===n?t.price>+e:""===e&&""!==n?t.price<+n:void 0})},l=function(t,e){return t.filter(function(t){return e?!0===t.sale:t})};var s,f,d,p,v,y,g,h,m,b,S,k,w,O;m=document.getElementById("cart"),b=document.querySelector(".cart"),S=b&&b.querySelector(".cart-close"),k=document.querySelector(".goods"),w=document.querySelector("#cart .counter")||document.querySelector(".counter"),O=function(){var t=JSON.parse(localStorage.getItem("cart"))||[];w&&(w.textContent=t.length)},m&&m.addEventListener("click",function(){var t=JSON.parse(localStorage.getItem("cart"))||[];b.style.display="flex",o(t),O()}),S&&S.addEventListener("click",function(){b.style.display=""}),k?k.addEventListener("click",function(){var t,e=(t=c().m(function t(e){var n,a,i,u,l,s,f;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.target.closest("button")){t.n=1;break}return t.a(2);case 1:if(n.classList.contains("btn-primary")){t.n=2;break}return t.a(2);case 2:if(a=n.closest(".card")){t.n=3;break}return console.warn("card not found for clicked button",e.target),t.a(2);case 3:if(i=a.dataset.key){t.n=4;break}return console.warn("data-key missing on card",a),t.a(2);case 4:if(u=JSON.parse(localStorage.getItem("goods")),Array.isArray(u)&&0!==u.length){t.n=8;break}return t.p=5,t.n=6,r();case 6:u=t.v,localStorage.setItem("goods",JSON.stringify(u)),t.n=8;break;case 7:return t.p=7,f=t.v,console.error("Failed to fetch goods",f),t.a(2);case 8:if(l=u.find(function(t){return String(t.id)===String(i)||t.id===+i})){t.n=9;break}return console.warn("Item not found in goods for key",i,u),t.a(2);case 9:(s=JSON.parse(localStorage.getItem("cart"))||[]).push(l),localStorage.setItem("cart",JSON.stringify(s)),O(),"flex"===b.style.display&&o(s),console.log("Added to cart:",l);case 10:return t.a(2)}},t,null,[[5,7]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var c=t.apply(e,n);function a(t){i(c,r,o,a,u,"next",t)}function u(t){i(c,r,o,a,u,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()):console.warn("goods wrapper not found (.goods)"),O(),document.getElementById("cart"),r().then(function(t){localStorage.setItem("goods",JSON.stringify(t)),o(t)}),document.querySelector(".search-wrapper_input").addEventListener("input",function(t){var e=t.target.value;r().then(function(t){o(function(t,e){return t.filter(function(t){return t.title.toLowerCase().includes(e.toLowerCase())})}(t,e))})}),v=document.querySelector(".catalog-button > button"),y=document.querySelector(".catalog"),g=document.querySelectorAll(".catalog li"),h=!1,v.addEventListener("click",function(){h=!h,y.style.display=h?"block":""}),g.forEach(function(t){t.addEventListener("click",function(){var e=t.textContent;r().then(function(t){var n;o((n=e,t.filter(function(t){return t.category===n})))})})}),s=document.getElementById("min"),f=document.getElementById("max"),d=document.getElementById("discount-checkbox"),p=document.querySelector(".filter-check_checkmark"),s.addEventListener("input",function(){r().then(function(t){o(u(l(t,d.checked),s.value,f.value))})}),f.addEventListener("input",function(){r().then(function(t){o(u(l(t,d.checked),s.value,f.value))})}),d.addEventListener("change",function(){d.checked?p.classList.add("checked"):p.classList.remove("checked"),r().then(function(t){o(u(l(t,d.checked),s.value,f.value))})})})();
//# sourceMappingURL=bundle.js.map